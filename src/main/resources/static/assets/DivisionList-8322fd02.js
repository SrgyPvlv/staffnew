import{D as n}from"./DivisionsDataService-288c7cc9.js";import{_ as m,e as c,o as r,c as u,a as i,b as h,v as p,F as f,f as g}from"./index-2226a9a9.js";const D={name:"divisions-list",data(){return{divisions:[],newdivision:""}},computed:{currentUser(){return this.$store.state.auth.user},showAdminBoard(){return this.currentUser&&this.currentUser.roles?this.currentUser.roles.includes("ROLE_ADMIN"):!1}},methods:{retrieveDivisions(){n.getAll().then(e=>{this.divisions=e.data,console.log(e.data)}).catch(e=>{console.log(e)})},deleteDivision(e){n.delete(e).then(s=>{console.log(s.data),this.refreshList()},s=>{s.response&&s.response.status===410&&c.dispatch("logout"),s.response&&s.response.status===404&&alert(`Ошибка!
Что-то пошло не так!
Возможно Вы пытаетесь удалить департамент существующего подразделения!?`)}).catch(s=>{console.log(s)})},editDivision(e,s){var v={division:s};n.update(e,v).then(t=>{console.log(t.data),this.refreshList()},t=>{t.response&&t.response.status===410&&c.dispatch("logout"),t.response&&t.response.status===501&&alert("Ошибка! Что-то пошло не так!")}).catch(t=>{console.log(t)})},createDivision(){var e={division:this.newdivision};n.create(e).then(s=>{console.log(s.data),this.refreshList(),this.newdivision=""},s=>{s.response&&s.response.status===410&&c.dispatch("logout"),s.response&&s.response.status===501&&alert("Ошибка! Что-то пошло не так!")}).catch(s=>{console.log(s)})},refreshList(){this.retrieveDivisions()}},mounted(){this.retrieveDivisions()}},b={class:"list row"},w={class:"col-md-8"},k=i("h3",null," Список отделов ",-1),L=i("label",{for:"newdivision",class:"fw-bold fst-italic me-3"},"Новый отдел",-1),U={class:"col-md-8 outdiv shadow mt-3"},x={class:"col-md-12 indiv"},B={class:"list-group list-group-flush"},C=["onUpdate:modelValue"],V=["onClick"],y=["onClick"];function A(e,s,v,t,l,d){return r(),u("div",b,[i("div",w,[k,L,h(i("input",{id:"newdivision",name:"newdivision",class:"inputwidth","onUpdate:modelValue":s[0]||(s[0]=o=>l.newdivision=o)},null,512),[[p,l.newdivision]]),i("button",{onClick:s[1]||(s[1]=o=>d.createDivision()),class:"badge rounded-pill bg-info ms-3 border-0 delete"},"Создать"),i("div",U,[i("div",x,[i("ul",B,[(r(!0),u(f,null,g(l.divisions,(o,_)=>(r(),u("li",{class:"list-group-item car",key:_},[h(i("input",{id:"division",name:"division",class:"inputwidth","onUpdate:modelValue":a=>o.division=a},null,8,C),[[p,o.division]]),i("button",{onClick:a=>d.editDivision(o.id,o.division),class:"badge rounded-pill bg-success ms-3 border-0 delete"},"Сохранить",8,V),i("button",{onClick:a=>d.deleteDivision(o.id),class:"badge rounded-pill bg-danger ms-3 border-0 delete"},"Удалить",8,y)]))),128))])])])])])}const M=m(D,[["render",A]]);export{M as default};

import{D as v}from"./DepartmentsDataService-3555cd25.js";import{D as b}from"./DivisionsDataService-288c7cc9.js";import{G as D}from"./GroupesDataService-0cbce3ae.js";import{F as G}from"./FunctionGroupsDataService-ac4db0fe.js";import{_ as k,e as m,o as l,c as r,a as e,b as h,d as g,F as a,f as p,t as d}from"./index-2226a9a9.js";const U={name:"departments-list",data(){return{departments:[],divisions:[],groupes:[],funcgroupes:[],newdivision:"",newgroupe:"",newfunctiongroup:""}},computed:{currentUser(){return this.$store.state.auth.user},showAdminBoard(){return this.currentUser&&this.currentUser.roles?this.currentUser.roles.includes("ROLE_ADMIN"):!1}},methods:{retrieveDepartments(){v.getAll().then(s=>{this.departments=s.data,console.log(s.data)}).catch(s=>{console.log(s)})},deleteDepartment(s){v.delete(s).then(o=>{console.log(o.data),this.refreshList()},o=>{o.response&&o.response.status===410&&m.dispatch("logout"),o.response&&o.response.status===404&&alert(`Ошибка!
Что-то пошло не так!
Возможно Вы пытаетесь удалить подразделение, в котором есть сотрудники!?`)}).catch(o=>{console.log(o)})},editDepartment(s,o,f,w){var n={division:o,groupe:f,functionGroup:w};v.update(s,n).then(u=>{console.log(u.data),this.refreshList()},u=>{u.response&&u.response.status===410&&m.dispatch("logout"),u.response&&u.response.status===501&&alert("Ошибка! Что-то пошло не так!")}).catch(u=>{console.log(u)})},createDepartment(){var s={division:this.newdivision,groupe:this.newgroupe,functionGroup:this.newfunctiongroup};v.create(s).then(o=>{console.log(o.data),this.refreshList(),this.newdivision="",this.newgroupe="",this.newfunctiongroup=""},o=>{o.response&&o.response.status===410&&m.dispatch("logout"),o.response&&o.response.status===501&&alert("Ошибка! Что-то пошло не так!")}).catch(o=>{console.log(o)})},refreshList(){this.retrieveDepartments()},retrieveDivisions(){b.getAll().then(s=>{this.divisions=s.data,console.log(s.data)}).catch(s=>{console.log(s)})},retrieveGroupes(){D.getAll().then(s=>{this.groupes=s.data,console.log(s.data)}).catch(s=>{console.log(s)})},retrieveFunctionGroups(){G.getAll().then(s=>{this.funcgroupes=s.data,console.log(s.data)}).catch(s=>{console.log(s)})}},mounted(){this.retrieveDepartments(),this.retrieveDivisions(),this.retrieveGroupes(),this.retrieveFunctionGroups()}},y={class:"list row"},V=e("h3",null," Список подразделений ",-1),L=e("p",{class:"fw-bold fst-italic mb-3"},"Новое подразделение",-1),q={class:"list-group list-group-horizontal list-group-flush"},A={class:"list-group-item noborder"},F=e("option",{selected:"",disabled:"",value:"",class:"fst-italic"},"Отдел",-1),S=["value"],B={class:"list-group-item noborder"},C=e("option",{selected:"",disabled:"",value:"",class:"fst-italic"},"Группа",-1),x=e("option",{value:null},"Нет",-1),z=["value"],E={class:"list-group-item noborder"},M=e("option",{selected:"",disabled:"",value:"",class:"fst-italic"},"Функциональная группа",-1),N=e("option",{value:null},"Нет",-1),I=["value"],O={class:"list-group-item noborder"},R={class:"col-md-12 outdiv shadow mt-3"},j={class:"col-md-12 indiv"},H={class:"list-group list-group-flush"},J={class:"list-group list-group-horizontal list-group-flush"},K={class:"list-group-item noborder"},P=["onUpdate:modelValue"],Q=["value"],T={class:"list-group-item noborder"},W=["onUpdate:modelValue"],X=e("option",{value:null},"Нет",-1),Y=["value"],Z={class:"list-group-item noborder"},$=["onUpdate:modelValue"],ee=e("option",{value:null},"Нет",-1),oe=["value"],te={class:"list-group-item noborder"},se=["onClick"],ie=["onClick"];function ne(s,o,f,w,n,u){return l(),r("div",y,[V,L,e("div",q,[e("div",A,[h(e("select",{class:"form-select optwidth",id:"newdivision",name:"newdivision","onUpdate:modelValue":o[0]||(o[0]=t=>n.newdivision=t),required:""},[F,(l(!0),r(a,null,p(n.divisions,(t,c)=>(l(),r("option",{key:c,value:t,class:"noborder"},d(t.division),9,S))),128))],512),[[g,n.newdivision]]),e("p",null,d(this.newdivision),1)]),e("div",B,[h(e("select",{class:"form-select optwidth",id:"newgroupe",name:"newgroupe","onUpdate:modelValue":o[1]||(o[1]=t=>n.newgroupe=t),required:""},[C,x,(l(!0),r(a,null,p(n.groupes,(t,c)=>(l(),r("option",{key:c,value:t},d(t.groupe),9,z))),128))],512),[[g,n.newgroupe]]),e("p",null,d(this.newgroupe),1)]),e("div",E,[h(e("select",{class:"form-select optwidth",id:"newfunctiongroup",name:"newfunctiongroup","onUpdate:modelValue":o[2]||(o[2]=t=>n.newfunctiongroup=t),required:""},[M,N,(l(!0),r(a,null,p(n.funcgroupes,(t,c)=>(l(),r("option",{key:c,value:t},d(t.functionGroup),9,I))),128))],512),[[g,n.newfunctiongroup]]),e("p",null,d(this.newfunctiongroup),1)]),e("div",O,[e("button",{onClick:o[3]||(o[3]=t=>u.createDepartment()),class:"badge rounded-pill bg-info ms-3 border-0 delete"},"Создать")])]),e("div",R,[e("div",j,[e("ul",H,[(l(!0),r(a,null,p(n.departments,(t,c)=>(l(),r("li",{class:"list-group-item",key:c},[e("ul",J,[e("li",K,[h(e("select",{class:"form-select noborder optwidth",id:"division",name:"division","onUpdate:modelValue":i=>t.division=i,required:""},[(l(!0),r(a,null,p(n.divisions,(i,_)=>(l(),r("option",{key:_,value:i},d(i.division),9,Q))),128))],8,P),[[g,t.division]])]),e("li",T,[h(e("select",{class:"form-select noborder optwidth",id:"groupe",name:"groupe","onUpdate:modelValue":i=>t.groupe=i,required:""},[X,(l(!0),r(a,null,p(n.groupes,(i,_)=>(l(),r("option",{key:_,value:i},d(i.groupe),9,Y))),128))],8,W),[[g,t.groupe]])]),e("li",Z,[h(e("select",{class:"form-select noborder optwidth",id:"functionGroup",name:"functionGroup","onUpdate:modelValue":i=>t.functionGroup=i,required:""},[ee,(l(!0),r(a,null,p(n.funcgroupes,(i,_)=>(l(),r("option",{key:_,value:i},d(i.functionGroup),9,oe))),128))],8,$),[[g,t.functionGroup]])]),e("li",te,[e("button",{onClick:i=>u.editDepartment(t.id,t.division,t.groupe,t.functionGroup),class:"badge rounded-pill bg-success ms-3 border-0 delete"},"Сохранить",8,se),e("button",{onClick:i=>u.deleteDepartment(t.id),class:"badge rounded-pill bg-danger ms-3 border-0 delete"},"Удалить",8,ie)])])]))),128))])])])])}const ae=k(U,[["render",ne]]);export{ae as default};

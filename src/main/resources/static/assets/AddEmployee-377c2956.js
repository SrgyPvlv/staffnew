import{E as b}from"./EmployeesDataService-a0f50f70.js";import{C as v}from"./CarsDataService-4b8770b7.js";import{P as _}from"./PositionsDataService-ef3b583a.js";import{D as g}from"./DepartmentsDataService-3555cd25.js";import{_ as D,e as S,o as i,c as m,a as l,b as n,v as r,d as u,F as f,f as y,t as a}from"./index-2226a9a9.js";const P={name:"add-employee",data(){return{employee:{id:null,name:"",mobilePhone:"",birthday:"",localPhone:"",employeeId:"",login:"",email:"",employeeComment:"",factDepartmentSelected:"",staffDepartmentSelected:"",carSelected:null,positionSelected:""},submitted:!1,positions:[],cars:[],departments:[]}},methods:{saveEmployee(){var s={name:this.employee.name,mobilePhone:this.employee.mobilePhone,birthday:this.employee.birthday,localPhone:this.employee.localPhone,employeeId:this.employee.employeeId,login:this.employee.login,email:this.employee.email,employeeComment:this.employee.employeeComment,factDepartment:this.employee.factDepartmentSelected,staffDepartment:this.employee.staffDepartmentSelected,car:this.employee.carSelected,position:this.employee.positionSelected};b.create(s).then(o=>{this.employee.id=o.data.id,console.log(o.data),this.submitted=!0},o=>{o.response&&o.response.status===410&&S.dispatch("logout"),o.response&&o.response.status===501&&alert("Ошибка! Что-то пошло не так!")}).catch(o=>{console.log(o)})},newEmployee(){this.submitted=!1,this.employee={}},retrievePositions(){_.getAll().then(s=>{this.positions=s.data,console.log(s.data)}).catch(s=>{console.log(s)})},retrieveCars(){v.getAll().then(s=>{var o=s.data;this.cars=o.filter(p=>p.employee==null).map(p=>{var h={id:p.id,carNumber:p.carNumber,carComment:p.carComment,carModel:p.carModel};return h}),console.log(s.data)}).catch(s=>{console.log(s)})},retrieveDepartments(){g.getAll().then(s=>{this.departments=s.data,console.log(s.data)}).catch(s=>{console.log(s)})}},mounted(){this.retrievePositions(),this.retrieveCars(),this.retrieveDepartments()}},w={class:"submit-form was-validated"},C={key:0},V={class:"form-group"},E=l("label",{for:"name",class:"fw-bold"},"ФИО сотрудника",-1),U={class:"form-group mt-3"},k=l("label",{for:"mobilePhone",class:"fw-bold"},"Мобильный телефон",-1),q={class:"form-group mt-3"},x=l("label",{for:"birthday",class:"fw-bold"},"Дата рождения",-1),I={class:"form-group mt-3"},G=l("label",{for:"localPhone",class:"fw-bold"},"Местный телефон",-1),A={class:"form-group mt-3"},B=l("label",{for:"employeeId",class:"fw-bold"},"Табельный номер",-1),M={class:"form-group mt-3"},N=l("label",{for:"login",class:"fw-bold"},"Логин",-1),F={class:"form-group mt-3"},z=l("label",{for:"email",class:"fw-bold"},"E-mail",-1),L={class:"form-group mt-3"},T=l("label",{for:"employeeComment",class:"fw-bold"},"Комментарий",-1),j={class:"form-group mt-3"},H=l("label",{for:"factDepartment",class:"fw-bold"},"Подразделение (факт):",-1),J=["value"],K={class:"form-group mt-3"},O=l("label",{for:"staffDepartment",class:"fw-bold"},"Подразделение (по штату):",-1),Q=["value"],R={class:"form-group mt-3"},W=l("label",{for:"position",class:"fw-bold"},"Должность",-1),X=["value"],Y={class:"form-group mt-3"},Z=l("label",{for:"car",class:"fw-bold"},"Автомобиль",-1),$=["value"],ee={key:1},oe=l("h4",null,"Данные успешно сохранены!",-1);function le(s,o,p,h,t,c){return i(),m("div",w,[t.submitted?(i(),m("div",ee,[oe,l("button",{class:"btn btn-outline-success mt-3",onClick:o[13]||(o[13]=(...e)=>c.newEmployee&&c.newEmployee(...e))},"Добавить еще")])):(i(),m("div",C,[l("div",V,[E,n(l("input",{type:"text",class:"form-control mt-1",id:"name",required:"","onUpdate:modelValue":o[0]||(o[0]=e=>t.employee.name=e),name:"name",placeholder:"Фамилия Имя Отчество"},null,512),[[r,t.employee.name]])]),l("div",U,[k,n(l("input",{type:"text",class:"form-control mt-1",id:"mobilePhone",required:"","onUpdate:modelValue":o[1]||(o[1]=e=>t.employee.mobilePhone=e),name:"mobilePhone",placeholder:"Введите номер в формате: +79112223344"},null,512),[[r,t.employee.mobilePhone]])]),l("div",q,[x,n(l("input",{type:"date",class:"form-control mt-1",id:"birthday",required:"","onUpdate:modelValue":o[2]||(o[2]=e=>t.employee.birthday=e),name:"birthday"},null,512),[[r,t.employee.birthday]])]),l("div",I,[G,n(l("input",{type:"number",class:"form-control mt-1",id:"localPhone",min:"1","onUpdate:modelValue":o[3]||(o[3]=e=>t.employee.localPhone=e),name:"localPhone"},null,512),[[r,t.employee.localPhone]])]),l("div",A,[B,n(l("input",{type:"number",class:"form-control mt-1",id:"employeeId",min:"1",required:"","onUpdate:modelValue":o[4]||(o[4]=e=>t.employee.employeeId=e),name:"employeeId"},null,512),[[r,t.employee.employeeId]])]),l("div",M,[N,n(l("input",{type:"text",class:"form-control mt-1",id:"login",required:"","onUpdate:modelValue":o[5]||(o[5]=e=>t.employee.login=e),name:"login"},null,512),[[r,t.employee.login]])]),l("div",F,[z,n(l("input",{type:"email",class:"form-control mt-1",id:"email",required:"","onUpdate:modelValue":o[6]||(o[6]=e=>t.employee.email=e),name:"email"},null,512),[[r,t.employee.email]])]),l("div",L,[T,n(l("input",{type:"text",class:"form-control mt-1",id:"employeeComment","onUpdate:modelValue":o[7]||(o[7]=e=>t.employee.employeeComment=e),name:"employeeComment"},null,512),[[r,t.employee.employeeComment]])]),l("div",j,[H,n(l("select",{class:"form-select mt-1",id:"factDepartment",name:"factDepartment","onUpdate:modelValue":o[8]||(o[8]=e=>t.employee.factDepartmentSelected=e),required:""},[(i(!0),m(f,null,y(t.departments,(e,d)=>(i(),m("option",{key:d,value:e},a(e.division!=null?e.division.division:"")+" "+a(e.groupe!=null?"/"+e.groupe.groupe:"")+" "+a(e.functionGroup!=null?"/"+e.functionGroup.functionGroup:""),9,J))),128))],512),[[u,t.employee.factDepartmentSelected]])]),l("div",K,[O,n(l("select",{class:"form-select mt-1",id:"staffDepartment",name:"staffDepartment","onUpdate:modelValue":o[9]||(o[9]=e=>t.employee.staffDepartmentSelected=e),required:""},[(i(!0),m(f,null,y(t.departments,(e,d)=>(i(),m("option",{key:d,value:e},a(e.division!=null?e.division.division:"")+" "+a(e.groupe!=null?"/"+e.groupe.groupe:"")+" "+a(e.functionGroup!=null?"/"+e.functionGroup.functionGroup:""),9,Q))),128))],512),[[u,t.employee.staffDepartmentSelected]])]),l("div",R,[W,n(l("select",{class:"form-select mt-1",id:"position",name:"position","onUpdate:modelValue":o[10]||(o[10]=e=>t.employee.positionSelected=e),required:""},[(i(!0),m(f,null,y(t.positions,(e,d)=>(i(),m("option",{key:d,value:e},a(e.position),9,X))),128))],512),[[u,t.employee.positionSelected]])]),l("div",Y,[Z,n(l("select",{class:"form-select mt-1",id:"car",name:"car","onUpdate:modelValue":o[11]||(o[11]=e=>t.employee.carSelected=e)},[(i(!0),m(f,null,y(t.cars,(e,d)=>(i(),m("option",{key:d,value:e},a(e.carNumber),9,$))),128))],512),[[u,t.employee.carSelected]])]),l("button",{onClick:o[12]||(o[12]=(...e)=>c.saveEmployee&&c.saveEmployee(...e)),class:"btn btn-success mt-3"},"Сохранить")]))])}const re=D(P,[["render",le]]);export{re as default};

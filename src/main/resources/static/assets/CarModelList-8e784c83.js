import{C as a}from"./CarModelsDataService-91d1e006.js";import{_ as f,e as i,o as c,c as u,a as t,b as m,v as p,F as g,f as v}from"./index-2226a9a9.js";const M={name:"carmodels-list",data(){return{carmodels:[],newcarmodel:""}},computed:{currentUser(){return this.$store.state.auth.user},showAdminBoard(){return this.currentUser&&this.currentUser.roles?this.currentUser.roles.includes("ROLE_ADMIN"):!1}},methods:{retrieveCarModels(){a.getAll().then(s=>{this.carmodels=s.data,console.log(s.data)}).catch(s=>{console.log(s)})},deleteCarModel(s){a.delete(s).then(e=>{console.log(e.data),this.refreshList()},e=>{e.response&&e.response.status===410&&i.dispatch("logout"),e.response&&e.response.status===404&&alert(`Ошибка!
Что-то пошло не так!
Возможно Вы пытаетесь удалить модель существующих автомобилей!?`)}).catch(e=>{console.log(e)})},editCarModel(s,e){var h={carModel:e};a.update(s,h).then(o=>{console.log(o.data),this.refreshList()},o=>{o.response&&o.response.status===410&&i.dispatch("logout"),o.response&&o.response.status===501&&alert("Ошибка! Что-то пошло не так!")}).catch(o=>{console.log(o)})},createCarModel(){var s={carModel:this.newcarmodel};a.create(s).then(e=>{console.log(e.data),this.refreshList(),this.newcarmodel=""},e=>{e.response&&e.response.status===410&&i.dispatch("logout"),e.response&&e.response.status===501&&alert("Ошибка! Что-то пошло не так!")}).catch(e=>{console.log(e)})},refreshList(){this.retrieveCarModels()}},mounted(){this.retrieveCarModels()}},C={class:"list row"},w={class:"col-md-8"},b=t("h3",null," Список моделей автомобилей ",-1),k=t("label",{for:"newcarmodel",class:"fw-bold fst-italic me-3"},"Новая модель",-1),L={class:"col-md-8 outdiv shadow mt-3"},U={class:"col-md-12 indiv"},x={class:"list-group list-group-flush"},B=["onUpdate:modelValue"],V=["onClick"],y=["onClick"];function A(s,e,h,o,d,n){return c(),u("div",C,[t("div",w,[b,k,m(t("input",{id:"newcarmodel",name:"newcarmodel",class:"newinputwidth","onUpdate:modelValue":e[0]||(e[0]=l=>d.newcarmodel=l)},null,512),[[p,d.newcarmodel]]),t("button",{onClick:e[1]||(e[1]=l=>n.createCarModel()),class:"badge rounded-pill bg-info ms-3 border-0 delete"},"Создать"),t("div",L,[t("div",U,[t("ul",x,[(c(!0),u(g,null,v(d.carmodels,(l,_)=>(c(),u("li",{class:"list-group-item car",key:_},[m(t("input",{id:"carmodel",name:"carmodel",class:"inputwidth","onUpdate:modelValue":r=>l.carModel=r},null,8,B),[[p,l.carModel]]),t("button",{onClick:r=>n.editCarModel(l.id,l.carModel),class:"badge rounded-pill bg-success ms-3 border-0 delete"},"Сохранить",8,V),t("button",{onClick:r=>n.deleteCarModel(l.id),class:"badge rounded-pill bg-danger ms-3 border-0 delete"},"Удалить",8,y)]))),128))])])])])])}const F=f(M,[["render",A]]);export{F as default};

import{G as r}from"./GroupesDataService-0cbce3ae.js";import{_ as m,e as u,o as d,c,a as t,b as h,v as g,F as f,f as v}from"./index-2226a9a9.js";const b={name:"groupes-list",data(){return{groupes:[],newgroupe:""}},computed:{currentUser(){return this.$store.state.auth.user},showAdminBoard(){return this.currentUser&&this.currentUser.roles?this.currentUser.roles.includes("ROLE_ADMIN"):!1}},methods:{retrieveGroupes(){r.getAll().then(s=>{this.groupes=s.data,console.log(s.data)}).catch(s=>{console.log(s)})},deleteGroupe(s){r.delete(s).then(e=>{console.log(e.data),this.refreshList()},e=>{e.response&&e.response.status===410&&u.dispatch("logout"),e.response&&e.response.status===404&&alert(`Ошибка!
Что-то пошло не так!
Возможно Вы пытаетесь удалить группу существующего подразделения!?`)}).catch(e=>{console.log(e)})},editGroupe(s,e){var p={groupe:e};r.update(s,p).then(o=>{console.log(o.data),this.refreshList()},o=>{o.response&&o.response.status===410&&u.dispatch("logout"),o.response&&o.response.status===501&&alert("Ошибка! Что-то пошло не так!")}).catch(o=>{console.log(o)})},createGroupe(){var s={groupe:this.newgroupe};r.create(s).then(e=>{console.log(e.data),this.refreshList(),this.newgroupe=""},e=>{e.response&&e.response.status===410&&u.dispatch("logout"),e.response&&e.response.status===501&&alert("Ошибка! Что-то пошло не так!")}).catch(e=>{console.log(e)})},refreshList(){this.retrieveGroupes()}},mounted(){this.retrieveGroupes()}},w={class:"list row"},G={class:"col-md-9"},k=t("h3",null," Список групп ",-1),L=t("label",{for:"newgroupe",class:"fw-bold fst-italic me-3"},"Новая группа",-1),U={class:"col-md-9 outdiv shadow mt-3"},x={class:"col-md-12 indiv"},B={class:"list-group list-group-flush"},C=["onUpdate:modelValue"],V=["onClick"],y=["onClick"];function A(s,e,p,o,l,i){return d(),c("div",w,[t("div",G,[k,L,h(t("input",{id:"newgroupe",name:"newgroupe",class:"inputwidth","onUpdate:modelValue":e[0]||(e[0]=n=>l.newgroupe=n)},null,512),[[g,l.newgroupe]]),t("button",{onClick:e[1]||(e[1]=n=>i.createGroupe()),class:"badge rounded-pill bg-info ms-3 border-0 delete"},"Создать"),t("div",U,[t("div",x,[t("ul",B,[(d(!0),c(f,null,v(l.groupes,(n,_)=>(d(),c("li",{class:"list-group-item car",key:_},[h(t("input",{id:"groupe",name:"groupe",class:"inputwidth","onUpdate:modelValue":a=>n.groupe=a},null,8,C),[[g,n.groupe]]),t("button",{onClick:a=>i.editGroupe(n.id,n.groupe),class:"badge rounded-pill bg-success ms-3 border-0 delete"},"Сохранить",8,V),t("button",{onClick:a=>i.deleteGroupe(n.id),class:"badge rounded-pill bg-danger ms-3 border-0 delete"},"Удалить",8,y)]))),128))])])])])])}const F=m(b,[["render",A]]);export{F as default};

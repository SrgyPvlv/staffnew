import{F as u}from"./FunctionGroupsDataService-ac4db0fe.js";import{_,e as l,o as a,c as d,a as s,b as h,v as f,F as m,f as v}from"./index-2226a9a9.js";const G={name:"groupes-list",data(){return{funcgroupes:[],newfuncgroupe:""}},computed:{currentUser(){return this.$store.state.auth.user},showAdminBoard(){return this.currentUser&&this.currentUser.roles?this.currentUser.roles.includes("ROLE_ADMIN"):!1}},methods:{retrieveFunctionGroups(){u.getAll().then(t=>{this.funcgroupes=t.data,console.log(t.data)}).catch(t=>{console.log(t)})},deleteFunctionGroup(t){u.delete(t).then(e=>{console.log(e.data),this.refreshList()},e=>{e.response&&e.response.status===410&&l.dispatch("logout"),e.response&&e.response.status===404&&alert(`Ошибка!
Что-то пошло не так!
Возможно Вы пытаетесь удалить ФГ существующего подразделения!?`)}).catch(e=>{console.log(e)})},editFunctionGroup(t,e){var p={functionGroup:e};u.update(t,p).then(o=>{console.log(o.data),this.refreshList()},o=>{o.response&&o.response.status===410&&l.dispatch("logout"),o.response&&o.response.status===501&&alert("Ошибка! Что-то пошло не так!")}).catch(o=>{console.log(o)})},createFunctionGroup(){var t={functionGroup:this.newfuncgroupe};u.create(t).then(e=>{console.log(e.data),this.refreshList(),this.newfuncgroupe=""},e=>{e.response&&e.response.status===410&&l.dispatch("logout"),e.response&&e.response.status===501&&alert("Ошибка! Что-то пошло не так!")}).catch(e=>{console.log(e)})},refreshList(){this.retrieveFunctionGroups()}},mounted(){this.retrieveFunctionGroups()}},b={class:"list row"},w={class:"col-md-8"},F=s("h3",null," Список функциональных групп (ФГ) ",-1),k=s("label",{for:"newfuncgroupe",class:"fw-bold fst-italic me-3"},"Новая ФГ",-1),L={class:"col-md-8 outdiv shadow mt-3"},U={class:"col-md-12 indiv"},x={class:"list-group list-group-flush"},B=["onUpdate:modelValue"],C=["onClick"],V=["onClick"];function y(t,e,p,o,i,c){return a(),d("div",b,[s("div",w,[F,k,h(s("input",{id:"newfuncgroupe",name:"newfuncgroupe",class:"inputwidth","onUpdate:modelValue":e[0]||(e[0]=n=>i.newfuncgroupe=n)},null,512),[[f,i.newfuncgroupe]]),s("button",{onClick:e[1]||(e[1]=n=>c.createFunctionGroup()),class:"badge rounded-pill bg-info ms-3 border-0 delete"},"Создать"),s("div",L,[s("div",U,[s("ul",x,[(a(!0),d(m,null,v(i.funcgroupes,(n,g)=>(a(),d("li",{class:"list-group-item car",key:g},[h(s("input",{id:"funcgroupe",name:"funcgroupe",class:"inputwidth","onUpdate:modelValue":r=>n.functionGroup=r},null,8,B),[[f,n.functionGroup]]),s("button",{onClick:r=>c.editFunctionGroup(n.id,n.functionGroup),class:"badge rounded-pill bg-success ms-3 border-0 delete"},"Сохранить",8,C),s("button",{onClick:r=>c.deleteFunctionGroup(n.id),class:"badge rounded-pill bg-danger ms-3 border-0 delete"},"Удалить",8,V)]))),128))])])])])])}const E=_(G,[["render",y]]);export{E as default};

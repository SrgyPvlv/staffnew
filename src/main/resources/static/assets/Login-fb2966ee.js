import{F as p,a as g,E as h,c as u,b as i}from"./index.esm-fadb0a40.js";import{_ as f,r as n,o as d,c as l,a as s,i as t,j as b,b as v,l as w,t as y,g as x}from"./index-2226a9a9.js";const F={name:"Login",components:{Form:p,Field:g,ErrorMessage:h},data(){return{loading:!1,message:"",schema:u().shape({username:i().required("Введите логин!"),password:i().required("Введите пароль!")})}},computed:{loggedIn(){return this.$store.state.auth.status.loggedIn}},created(){this.loggedIn&&this.$router.push("/")},methods:{handleLogin(a){this.loading=!0,this.$store.dispatch("auth/login",a).then(()=>{this.$router.push("/")},e=>{this.loading=!1,this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString()})}}},k={class:"col-md-12 myloginform"},E={class:"card"},L=s("img",{id:"profile-img",src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",class:"card-img-top"},null,-1),S={class:"card-body"},$=s("p",{class:"text-danger"},"Вход только для администратора!",-1),B={class:"form-group"},C=s("label",{for:"username",class:"fw-bold"},"Логин",-1),I={class:"form-group mt-3"},M=s("label",{for:"password",class:"fw-bold"},"Пароль",-1),N={class:"form-group mt-3"},V=["disabled"],q={class:"spinner-border spinner-border-sm"},D=s("span",null,"Войти",-1),j={class:"form-group mt-3"},z={key:0,class:"alert alert-danger",role:"alert"};function A(a,e,G,H,o,m){const r=n("Field"),c=n("ErrorMessage"),_=n("Form");return d(),l("div",k,[s("div",E,[L,s("div",S,[$,t(_,{onSubmit:m.handleLogin,"validation-schema":o.schema},{default:b(()=>[s("div",B,[C,t(r,{name:"username",type:"text",class:"form-control mt-1"}),t(c,{name:"username",class:"error-feedback"})]),s("div",I,[M,t(r,{name:"password",type:"password",class:"form-control mt-1"}),t(c,{name:"password",class:"error-feedback"})]),s("div",N,[s("button",{class:"btn btn-primary btn-block",disabled:o.loading},[v(s("span",q,null,512),[[w,o.loading]]),D],8,V)]),s("div",j,[o.message?(d(),l("div",z,y(o.message),1)):x("",!0)])]),_:1},8,["onSubmit","validation-schema"])])])])}const O=f(F,[["render",A]]);export{O as default};

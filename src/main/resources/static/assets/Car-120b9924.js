import{C as d}from"./CarsDataService-4b8770b7.js";import{C as _}from"./CarModelsDataService-91d1e006.js";import{_ as h,e as C,o as a,c as l,a as t,b as n,v as m,d as p,F as f,f as g,t as i}from"./index-2226a9a9.js";const v={name:"car",data(){return{currentCar:null,message:"",carmodels:[]}},methods:{getCar(o){d.get(o).then(e=>{this.currentCar=e.data,console.log(e.data)}).catch(e=>{console.log(e)})},updateCar(){var o={carNumber:this.currentCar.carNumber,carComment:this.currentCar.carComment,carModel:this.currentCar.carModel};d.update(this.currentCar.id,o).then(e=>{console.log(e.data),this.message="Данные по автомобилю успешно обновлены!"},e=>{e.response&&e.response.status===410&&C.dispatch("logout"),e.response&&e.response.status===501&&alert("Ошибка! Что-то пошло не так!")}).catch(e=>{console.log(e)})},retrieveCarModel(){_.getAll().then(o=>{this.carmodels=o.data,console.log(o.data)}).catch(o=>{console.log(o)})}},mounted(){this.message="",this.getCar(this.$route.params.id),this.retrieveCarModel()}},b={key:0,class:"edit-form"},M=t("h4",null,"Автомобиль",-1),x={class:"was-validated"},y={class:"form-group mt-3"},k=t("label",{for:"number",class:"fw-bold"},"Госномер автомобиля",-1),w={class:"form-group mt-3"},N=t("label",{for:"model",class:"fw-bold"},"Модель автомобиля",-1),A=["value"],B={class:"form-group mt-3"},D=t("label",{for:"comment",class:"fw-bold"},"Комментарий",-1),S={class:"mt-3"},V={class:"mt-3 text-success"},U={key:1},q=t("br",null,null,-1),F=t("p",null,"Выберите машину...",-1),E=[q,F];function L(o,e,T,j,r,c){return r.currentCar?(a(),l("div",b,[M,t("form",x,[t("div",y,[k,n(t("input",{type:"text",class:"form-control mt-1",id:"number",required:"","onUpdate:modelValue":e[0]||(e[0]=s=>r.currentCar.carNumber=s),name:"number",placeholder:"Введите номер в данном формате: A 111 AA 198"},null,512),[[m,r.currentCar.carNumber]])]),t("div",w,[N,n(t("select",{class:"form-select mt-1",id:"model",name:"model","onUpdate:modelValue":e[1]||(e[1]=s=>r.currentCar.carModel=s),required:""},[(a(!0),l(f,null,g(r.carmodels,(s,u)=>(a(),l("option",{key:u,value:s},i(s.carModel),9,A))),128))],512),[[p,r.currentCar.carModel]])]),t("div",B,[D,n(t("input",{class:"form-control mt-1",id:"comment","onUpdate:modelValue":e[2]||(e[2]=s=>r.currentCar.carComment=s),name:"comment"},null,512),[[m,r.currentCar.carComment]])])]),t("div",S,[t("button",{onClick:e[3]||(e[3]=(...s)=>c.updateCar&&c.updateCar(...s)),class:"btn btn-outline-success me-3"},"Обновить")]),t("h5",V,i(r.message),1)])):(a(),l("div",U,E))}const I=h(v,[["render",L]]);export{I as default};

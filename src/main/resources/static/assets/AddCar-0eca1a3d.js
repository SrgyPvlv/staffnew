import{C as i}from"./CarsDataService-4b8770b7.js";import{C as u}from"./CarModelsDataService-91d1e006.js";import{_,e as b,o as r,c as l,a as s,b as d,v as n,d as f,F as v,f as p,t as C}from"./index-2226a9a9.js";const h={name:"add-car",data(){return{car:{id:null,carNumber:"",carComment:"",carModelSelected:""},submitted:!1,carmodels:[]}},methods:{saveCar(){var a={carNumber:this.car.carNumber,carComment:this.car.carComment,carModel:this.car.carModelSelected};i.create(a).then(e=>{this.car.id=e.data.id,console.log(e.data),this.submitted=!0},e=>{e.response&&e.response.status===410&&b.dispatch("logout"),e.response&&e.response.status===501&&alert("Ошибка! Что-то пошло не так!")}).catch(e=>{console.log(e)})},newCar(){this.submitted=!1,this.car={}},retrieveCarModel(){u.getAll().then(a=>{this.carmodels=a.data,console.log(a.data)}).catch(a=>{console.log(a)})}},mounted(){this.retrieveCarModel()}},g={class:"submit-form was-validated"},M={key:0},w={class:"form-group"},S=s("label",{for:"number",class:"fw-bold"},"Госномер автомобиля",-1),k={class:"form-group mt-3"},y=s("label",{for:"model",class:"fw-bold"},"Модель автомобиля",-1),x=["value"],A={class:"form-group mt-3"},N=s("label",{for:"comment",class:"fw-bold"},"Комментарий",-1),B={key:1},D=s("h4",null,"Данные успешно сохранены!",-1);function V(a,e,U,q,o,c){return r(),l("div",g,[o.submitted?(r(),l("div",B,[D,s("button",{class:"btn btn-outline-success mt-3",onClick:e[4]||(e[4]=(...t)=>c.newCar&&c.newCar(...t))},"Добавить еще")])):(r(),l("div",M,[s("div",w,[S,d(s("input",{type:"text",class:"form-control mt-1",id:"number",required:"","onUpdate:modelValue":e[0]||(e[0]=t=>o.car.carNumber=t),name:"number",placeholder:"Введите номер в данном формате: A 111 AA 198"},null,512),[[n,o.car.carNumber]])]),s("div",k,[y,d(s("select",{class:"form-select mt-1",id:"model",name:"model","onUpdate:modelValue":e[1]||(e[1]=t=>o.car.carModelSelected=t),required:""},[(r(!0),l(v,null,p(o.carmodels,(t,m)=>(r(),l("option",{key:m,value:t},C(t.carModel),9,x))),128))],512),[[f,o.car.carModelSelected]])]),s("div",A,[N,d(s("input",{class:"form-control mt-1",id:"comment","onUpdate:modelValue":e[2]||(e[2]=t=>o.car.carComment=t),name:"comment"},null,512),[[n,o.car.carComment]])]),s("button",{onClick:e[3]||(e[3]=(...t)=>c.saveCar&&c.saveCar(...t)),class:"btn btn-success mt-3"},"Сохранить")]))])}const T=_(h,[["render",V]]);export{T as default};

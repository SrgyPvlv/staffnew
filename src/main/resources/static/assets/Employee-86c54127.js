import{E as h}from"./EmployeesDataService-a0f50f70.js";import{C as v}from"./CarsDataService-4b8770b7.js";import{P as b}from"./PositionsDataService-ef3b583a.js";import{D as g}from"./DepartmentsDataService-3555cd25.js";import{_ as E,e as D,o as i,c as m,a as o,b as r,v as c,d,F as f,f as y,t as a,g as C}from"./index-2226a9a9.js";const P={name:"employee",data(){return{currentEmployee:null,message:"",cars:[],positions:[],departments:[],newEmployeeCar:null}},methods:{getEmployee(s){h.get(s).then(t=>{var n=t.data,p=null;n.car!=null&&(p={id:n.car.id,carNumber:n.car.carNumber,carComment:n.car.carComment,carModel:n.car.carModel}),this.currentEmployee={id:n.id,name:n.name,mobilePhone:n.mobilePhone,birthday:n.birthday,localPhone:n.localPhone,employeeId:n.employeeId,login:n.login,email:n.email,employeeComment:n.employeeComment,factDepartment:n.factDepartment,staffDepartment:n.staffDepartment,car:p,position:n.position},console.log(t.data)}).catch(t=>{console.log(t)})},updateEmployee(){h.update(this.currentEmployee.id,this.currentEmployee).then(s=>{console.log(s.data),this.message="Данные по сотруднику успешно обновлены!"},s=>{s.response&&s.response.status===410&&D.dispatch("logout"),s.response&&s.response.status===501&&alert("Ошибка! Что-то пошло не так!")}).catch(s=>{console.log(s)})},retrievePositions(){b.getAll().then(s=>{this.positions=s.data,console.log(s.data)}).catch(s=>{console.log(s)})},retrieveCars(){v.getAll().then(s=>{var t=s.data;this.cars=t.filter(n=>n.employee==null).map(n=>{var p={id:n.id,carNumber:n.carNumber,carComment:n.carComment,carModel:n.carModel};return p}),console.log(s.data)}).catch(s=>{console.log(s)})},retrieveDepartments(){g.getAll().then(s=>{this.departments=s.data,console.log(s.data)}).catch(s=>{console.log(s)})}},mounted(){this.message="",this.getEmployee(this.$route.params.id),this.retrievePositions(),this.retrieveCars(),this.retrieveDepartments()}},w={key:0,class:"edit-form"},V=o("h4",null,"Сотрудник",-1),U={class:"was-validated"},k={class:"form-group"},x=o("label",{for:"name",class:"fw-bold"},"ФИО сотрудника",-1),q={class:"form-group mt-3"},N=o("label",{for:"mobilePhone",class:"fw-bold"},"Мобильный телефон",-1),I={class:"form-group mt-3"},G=o("label",{for:"birthday",class:"fw-bold"},"Дата рождения",-1),M={class:"form-group mt-3"},S=o("label",{for:"localPhone",class:"fw-bold"},"Местный телефон",-1),B={class:"form-group mt-3"},A=o("label",{for:"employeeId",class:"fw-bold"},"Табельный номер",-1),F={class:"form-group mt-3"},z=o("label",{for:"login",class:"fw-bold"},"Логин",-1),L={class:"form-group mt-3"},R=o("label",{for:"email",class:"fw-bold"},"E-mail",-1),T={class:"form-group mt-3"},j=o("label",{for:"employeeComment",class:"fw-bold"},"Комментарий",-1),H={class:"form-group mt-3"},J=o("label",{for:"factDepartment",class:"fw-bold"},"Подразделение (факт):",-1),K=["value"],O={class:"form-group mt-3"},Q=o("label",{for:"staffDepartment",class:"fw-bold"},"Подразделение (по штату):",-1),W=["value"],X={class:"form-group mt-3"},Y=o("label",{for:"position",class:"fw-bold"},"Должность",-1),Z=["value"],$={class:"form-group mt-3"},ee=o("label",{for:"car",class:"fw-bold"},"Автомобиль",-1),oe=o("option",{value:null},"Нет",-1),te=["value"],le=["value"],se={class:"mt-3"},ne={class:"mt-3 text-success"},re={key:1},ie=o("br",null,null,-1),me=o("p",null,"Выберите сотрудника...",-1),ae=[ie,me];function ce(s,t,n,p,l,_){return l.currentEmployee?(i(),m("div",w,[V,o("form",U,[o("div",k,[x,r(o("input",{type:"text",class:"form-control mt-1",id:"name",required:"","onUpdate:modelValue":t[0]||(t[0]=e=>l.currentEmployee.name=e),name:"name",placeholder:"Фамилия Имя Отчество"},null,512),[[c,l.currentEmployee.name]])]),o("div",q,[N,r(o("input",{type:"text",class:"form-control mt-1",id:"mobilePhone",required:"","onUpdate:modelValue":t[1]||(t[1]=e=>l.currentEmployee.mobilePhone=e),name:"mobilePhone",placeholder:"Введите номер в формате: +79112223344"},null,512),[[c,l.currentEmployee.mobilePhone]])]),o("div",I,[G,r(o("input",{type:"date",class:"form-control mt-1",id:"birthday",required:"","onUpdate:modelValue":t[2]||(t[2]=e=>l.currentEmployee.birthday=e),name:"birthday"},null,512),[[c,l.currentEmployee.birthday]])]),o("div",M,[S,r(o("input",{type:"number",class:"form-control mt-1",id:"localPhone",min:"1","onUpdate:modelValue":t[3]||(t[3]=e=>l.currentEmployee.localPhone=e),name:"localPhone"},null,512),[[c,l.currentEmployee.localPhone]])]),o("div",B,[A,r(o("input",{type:"number",class:"form-control mt-1",id:"employeeId",min:"1",required:"","onUpdate:modelValue":t[4]||(t[4]=e=>l.currentEmployee.employeeId=e),name:"employeeId"},null,512),[[c,l.currentEmployee.employeeId]])]),o("div",F,[z,r(o("input",{type:"text",class:"form-control mt-1",id:"login",required:"","onUpdate:modelValue":t[5]||(t[5]=e=>l.currentEmployee.login=e),name:"login"},null,512),[[c,l.currentEmployee.login]])]),o("div",L,[R,r(o("input",{type:"email",class:"form-control mt-1",id:"email",required:"","onUpdate:modelValue":t[6]||(t[6]=e=>l.currentEmployee.email=e),name:"email"},null,512),[[c,l.currentEmployee.email]])]),o("div",T,[j,r(o("input",{type:"text",class:"form-control mt-1",id:"employeeComment","onUpdate:modelValue":t[7]||(t[7]=e=>l.currentEmployee.employeeComment=e),name:"employeeComment"},null,512),[[c,l.currentEmployee.employeeComment]])]),o("div",H,[J,r(o("select",{class:"form-select mt-1",id:"factDepartment",name:"factDepartment","onUpdate:modelValue":t[8]||(t[8]=e=>l.currentEmployee.factDepartment=e),required:""},[(i(!0),m(f,null,y(l.departments,(e,u)=>(i(),m("option",{key:u,value:e},a(e.division!=null?e.division.division:"")+" "+a(e.groupe!=null?"/"+e.groupe.groupe:"")+" "+a(e.functionGroup!=null?"/"+e.functionGroup.functionGroup:""),9,K))),128))],512),[[d,l.currentEmployee.factDepartment]])]),o("div",O,[Q,r(o("select",{class:"form-select mt-1",id:"staffDepartment",name:"staffDepartment","onUpdate:modelValue":t[9]||(t[9]=e=>l.currentEmployee.staffDepartment=e),required:""},[(i(!0),m(f,null,y(l.departments,(e,u)=>(i(),m("option",{key:u,value:e},a(e.division!=null?e.division.division:"")+" "+a(e.groupe!=null?"/"+e.groupe.groupe:"")+" "+a(e.functionGroup!=null?"/"+e.functionGroup.functionGroup:""),9,W))),128))],512),[[d,l.currentEmployee.staffDepartment]])]),o("div",X,[Y,r(o("select",{class:"form-select mt-1",id:"position",name:"position","onUpdate:modelValue":t[10]||(t[10]=e=>l.currentEmployee.position=e),required:""},[(i(!0),m(f,null,y(l.positions,(e,u)=>(i(),m("option",{key:u,value:e},a(e.position),9,Z))),128))],512),[[d,l.currentEmployee.position]])]),o("div",$,[ee,r(o("select",{class:"form-select mt-1",id:"car",name:"car","onUpdate:modelValue":t[11]||(t[11]=e=>l.currentEmployee.car=e)},[oe,l.currentEmployee.car!=null?(i(),m("option",{key:0,value:l.currentEmployee.car},a(l.currentEmployee.car.carNumber),9,te)):C("",!0),(i(!0),m(f,null,y(l.cars,(e,u)=>(i(),m("option",{key:u,value:e},a(e.carNumber),9,le))),128))],512),[[d,l.currentEmployee.car]])])]),o("div",se,[o("button",{onClick:t[12]||(t[12]=(...e)=>_.updateEmployee&&_.updateEmployee(...e)),class:"btn btn-outline-success me-3"},"Обновить")]),o("h5",ne,a(l.message),1)])):(i(),m("div",re,ae))}const _e=E(P,[["render",ce]]);export{_e as default};

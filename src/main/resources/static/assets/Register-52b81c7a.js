import{F as _,a as g,E as p,c as f,b as m}from"./index.esm-fadb0a40.js";import{_ as b,r,o as c,c as i,a as s,i as a,j as v,n as x,t as w,g as d,b as y,l as k,h as F}from"./index-2226a9a9.js";const M={name:"Register",components:{Form:_,Field:g,ErrorMessage:p},data(){return{successful:!1,loading:!1,message:"",schema:f().shape({username:m().required("Username is required!").min(3,"Must be at least 3 characters!").max(20,"Must be maximum 20 characters!"),password:m().required("Password is required!").min(6,"Must be at least 6 characters!").max(40,"Must be maximum 40 characters!")})}},computed:{loggedIn(){return this.$store.state.auth.status.loggedIn}},mounted(){this.loggedIn&&this.$router.push("/register")},methods:{handleRegister(o){this.message="",this.successful=!1,this.loading=!0,this.$store.dispatch("auth/register",o).then(e=>{this.message=e.message,this.successful=!0,this.loading=!1},e=>{this.message=e.response&&e.response.data&&e.response.data.message||e.message||e.toString(),this.successful=!1,this.loading=!1})}}},E={class:"col-md-12 myregisterform"},R={class:"card"},S=s("img",{id:"profile-img",src:"//ssl.gstatic.com/accounts/ui/avatar_2x.png",class:"card-img-top"},null,-1),q={class:"card-body"},C={key:0},N={class:"form-group"},V=s("label",{for:"username",class:"fw-bold"},"Логин",-1),B={class:"form-group mt-3"},I=s("label",{for:"password",class:"fw-bold"},"Пароль",-1),D={class:"form-group mt-3"},j=["disabled"],z={class:"spinner-border spinner-border-sm"};function P(o,e,T,U,t,u){const n=r("Field"),l=r("ErrorMessage"),h=r("Form");return c(),i("div",E,[s("div",R,[S,s("div",q,[a(h,{onSubmit:u.handleRegister,"validation-schema":t.schema},{default:v(()=>[t.successful?d("",!0):(c(),i("div",C,[s("div",N,[V,a(n,{name:"username",type:"text",class:"form-control mt-1"}),a(l,{name:"username",class:"error-feedback"})]),s("div",B,[I,a(n,{name:"password",type:"password",class:"form-control mt-1"}),a(l,{name:"password",class:"error-feedback"})]),s("div",D,[s("button",{class:"btn btn-primary btn-block",disabled:t.loading},[y(s("span",z,null,512),[[k,t.loading]]),F(" Зарегистрировать ")],8,j)])]))]),_:1},8,["onSubmit","validation-schema"]),t.message?(c(),i("div",{key:0,class:x(["alert mt-3",t.successful?"alert-success":"alert-danger"])},w(t.message),3)):d("",!0)])])])}const G=b(M,[["render",P]]);export{G as default};
